(function(t,e){if(typeof exports==="object"){module.exports=e()}else if(typeof define==="function"&&define.amd){define("muplayer/lib/AudioContextMonkeyPatch",e)}else{e()}})(this,function(){function t(t){if(!t)return;if(!t.setTargetAtTime)t.setTargetAtTime=t.setTargetValueAtTime}if(window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")){window.AudioContext=webkitAudioContext;if(!AudioContext.prototype.hasOwnProperty("createGain"))AudioContext.prototype.createGain=AudioContext.prototype.createGainNode;if(!AudioContext.prototype.hasOwnProperty("createDelay"))AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode;if(!AudioContext.prototype.hasOwnProperty("createScriptProcessor"))AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode;if(!AudioContext.prototype.hasOwnProperty("createPeriodicWave"))AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable;AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain;AudioContext.prototype.createGain=function(){var e=this.internal_createGain();t(e.gain);return e};AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay;AudioContext.prototype.createDelay=function(e){var i=e?this.internal_createDelay(e):this.internal_createDelay();t(i.delayTime);return i};AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource;AudioContext.prototype.createBufferSource=function(){var e=this.internal_createBufferSource();if(!e.start){e.start=function(t,e,i){if(e||i)this.noteGrainOn(t,e,i);else this.noteOn(t)}}if(!e.stop)e.stop=e.noteOff;t(e.playbackRate);return e};AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor;AudioContext.prototype.createDynamicsCompressor=function(){var e=this.internal_createDynamicsCompressor();t(e.threshold);t(e.knee);t(e.ratio);t(e.reduction);t(e.attack);t(e.release);return e};AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter;AudioContext.prototype.createBiquadFilter=function(){var e=this.internal_createBiquadFilter();t(e.frequency);t(e.detune);t(e.Q);t(e.gain);return e};if(AudioContext.prototype.hasOwnProperty("createOscillator")){AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator;AudioContext.prototype.createOscillator=function(){var e=this.internal_createOscillator();if(!e.start)e.start=e.noteOn;if(!e.stop)e.stop=e.noteOff;if(!e.setPeriodicWave)e.setPeriodicWave=e.setWaveTable;t(e.frequency);t(e.detune);return e}}}});(function(t,e){if(typeof exports==="object"){return module.exports=e()}else if(typeof define==="function"&&define.amd){return define("muplayer/plugin/audioNode",["muplayer/lib/AudioContextMonkeyPatch"],e)}else{return t._mu.AudioNode=e()}})(this,function(){var t;return t=function(){function t(t){var e,i,o;if(!AudioContext){throw new Error("\u6d4f\u89c8\u5668\u6682\u4e0d\u652f\u6301Web Audio API :(")}this.opts=o=$.extend({},this.defaults,t);if(!o.input){throw new Error("input\u662f\u5fc5\u586b\u7684\u521d\u59cb\u5316\u53c2\u6570\uff01")}this.context=e=new AudioContext;i=o.input;if(i instanceof Audio){this.input=e.createMediaElementSource(i)}else{this.input=i}this.output=o.output||e.destination}t.prototype.connect=function(){return this.output.connect.apply(this.output,arguments)};t.prototype.disconnect=function(){return this.output.disconnect(0)};return t}()});var extend=function(t,e){for(var i in e){if(hasProp.call(e,i))t[i]=e[i]}function o(){this.constructor=t}o.prototype=e.prototype;t.prototype=new o;t.__super__=e.prototype;return t},hasProp={}.hasOwnProperty;(function(t,e){if(typeof exports==="object"){return module.exports=e()}else if(typeof define==="function"&&define.amd){return define("muplayer/plugin/equalizer",["muplayer/plugin/audioNode"],e)}else{return t._mu.Equalizer=e(_mu.AudioNode)}})(this,function(t){var e,i;i=Math.pow;return e=function(t){extend(e,t);e.prototype.defaults={frequencies:[32,64,125,250,500,1e3,2e3,4e3,8e3,16e3],filter:{Q:1.4,gain:0},effects:{reset:[0,0,0,0,0,0,0,0,0,0],electronic:[4,3.5,1,0,-2,2,.5,1,4,5],classic:[4.5,3.5,3,2.5,-2,-1.5,0,2,3.5,4],jazz:[4,3,1,2,-2,-2,0,1.5,3,3.5],pop:[-2,-1,0,2,4,4,2,0,-1.5,-2],voice:[-2,-3.5,-3,1,3.5,3.5,3,1.5,.5,-2],dance:[3.5,6.5,5,0,2,3.5,5,4,3.5,0],rock:[5,4,3,1.5,-.5,-1.5,.5,2.5,3.5,4.5]}};function e(t){var i,o,n,r,a,s,p,l,u,f,c;e.__super__.constructor.call(this,t);f=this.opts;i=this.context;r=[];a={};l=null;n=f.filter;this.preGain=i.createGain();c=f.frequencies;for(p=0,u=c.length;p<u;p++){s=c[p];o=i.createBiquadFilter();o.type=o.PEAKING||"peaking";o.Q.value=n.Q;o.gain.value=n.gain;o.frequency.value=s;r.push(o);a[s]=o;if(!l){this.input.connect(this.preGain);this.preGain.connect(o)}else{l.connect(o)}l=o}l.connect(this.output);this.filters=r;this.filtersMap=a}e.prototype.setEffect=function(t,e){var i,o,n,r,a,s,p;o=this.opts.effects;i=o[t]||o["reset"];p=this.filters;for(r=a=0,s=p.length;a<s;r=++a){n=p[r];n.gain.value=i[r]}return e&&e(i)};e.prototype.setPreGainValue=function(t){if(!(-12<=t&&t<=12)){t=0}return this.preGain.gain.value=i(10,t/12)};e.prototype.setFilterValue=function(t,e){var i;if(!(-12<=e&&e<=12)){e=0}i=this.filtersMap[t];if(i){return i.gain.value=e}};return e}(t)});